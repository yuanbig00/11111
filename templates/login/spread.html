{% load static %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- <link rel="stylesheet" href="assets/materialize/css/materialize.min.css" media="screen,projection" />-->
    <link href="{% static 'login/assets/materialize/css/materialize.min.css' %}" media="screen,projection" rel="stylesheet"/>
    <!-- Bootstrap Styles-->
   <!--  <link href="assets/css/bootstrap.css" rel="stylesheet" />-->
    <link href="{% static 'login/assets/css/bootstrap.css' %}" rel="stylesheet"/>
    <!-- FontAwesome Styles-->
<!--    <link href="assets/css/font-awesome.css" rel="stylesheet" /> -->
    <link href="{% static 'login/assets/css/font-awesome.css' %}" rel="stylesheet"/>
    <!-- Morris Chart Styles-->
<!--    <link href="assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />  -->
    <link href="{% static 'login/assets/js/morris/morris-0.4.3.min.css' %}" rel="stylesheet"/>
    <!-- Custom Styles-->
    <!--    <link href="assets/css/custom-styles.css" rel="stylesheet" /> -->
    <link href="{% static 'login/assets/css/custom-styles.css' %}" rel="stylesheet"/>
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
   <!-- <link rel="stylesheet" href="assets/js/Lightweight-Chart/cssCharts.css"> -->
     <link href="{% static 'login/assets/js/Lightweight-Chart/cssCharts.css' %}" rel="stylesheet"/>
     <!-- echarts-->
  <!--  <script src="echarts/echarts.min.js"></script> -->
    <script src="{% static 'login/echarts/echarts.min.js' %}"></script>
  <!--  <script src="echarts/echarts.js"></script> -->
    <script src="{% static 'login/echarts/echarts.js' %}"></script>
    <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
</head>

<body>
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle waves-effect waves-dark" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand waves-effect waves-dark" href="index.html"><span class="glyphicon glyphicon-search"></span><strong>掘微舆情</strong></a>
				
		<div id="sideNav" href=""><i class="material-icons dp48">toc</i></div>
            </div>

            <ul class="nav navbar-top-links navbar-right"> 
				
				  <li><a class="dropdown-button waves-effect waves-dark" href="#!" data-activates="dropdown1"><i class="fa fa-user fa-fw"></i> <b>yuanyilin</b> <i class="material-icons right">arrow_drop_down</i></a></li>
            </ul>
        </nav>
		<!-- Dropdown Structure -->
<ul id="dropdown1" class="dropdown-content">
{#<li><a href="#"><i class="fa fa-user fa-fw"></i> My Profile</a>#}
{#</li>#}
{#<li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>#}
{#</li> #}
<li><a href="/logout/"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
</li>
</ul>

	   <!--/. NAV TOP  左边侧栏--> 
         <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">


                   <!--  <li>
                        <a class=" waves-effect waves-dark" href="index.html"><i class="fa fa-home"></i> 首页</a>
                    </li> -->
                    <li>
                        <a class="waves-effect waves-dark" href="{% url 'login:search_form' %}"><i class="fa fa-home"></i> 首页</a>
                    </li>
                    <li>
                        <a href="{% url 'login:table' event.id %}" class=" waves-effect waves-dark"><i class="fa fa-list-alt"></i> 事件概况</a>
                    </li>
                    <li>
                        <a href="{% url 'login:spread' event.id %}" class="active-menu  waves-effect waves-dark"><i class="fa fa-signal"></i> 传播分析</a>
                    </li>
                    <li>
                        <a href="{% url 'login:remark' event.id %}" class=" waves-effect waves-dark"><i class="fa fa-comments"></i> 舆论聚合</a>
                    </li>
                    <li>
                        <a href="{% url 'login:people' event.id %}" class="waves-effect waves-dark"><i class="fa fa-user"></i>人群画像</a>
                    </li>
                    
                    
                </ul>

            </div>

        </nav>
        <!-- /. NAV SIDE  -->
      <!-- 	主内容 -->
		<div id="page-wrapper">
		  <div class="header"> 
                        <h1 class="page-header">
                            传播分析
                        </h1>
						<ol class="breadcrumb">
					  <li><a href="spread.html">Spread</a></li>
					  <li class="active">Data</li>
					</ol> 
									
		</div>
            <div id="page-inner">

			 <div class="col-md-12">
	               <div class="card">
	               	<div class="icon-preview col s6 m3"><i class="material-icons dp48">equalizer</i><span>传播调性分析</span></div>
	               	 <div id="spread_emotion" style="width: 600px;height:500px;"></div>
						  <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
         var Spread_emotion= echarts.init(document.getElementById('spread_emotion'));
        // 指定图表的配置项和数据
         //数据

var m2R2Data= [
               {value:{{ event.neutral_remark }}, legendname:'中性',name:"中性评论  {{ event.neutral_remark }}条",itemStyle:{color:"#A9F387"}},
               {value:{{ event.positive_remark }}, legendname:'正面',name:"正面评论  {{ event.positive_remark }}条",itemStyle:{color:"#48D8BF"}},
               {value:{{ event.negative_remark }}, legendname:'负面',name:"负面评论  {{ event.negative_remark }}条",itemStyle:{color:"rgba(72,216,191, 0.3)"}},
               
            ];


 option = {
    title: [
    
    {
        text: '合计',
        subtext: {{ event.negative_remark|add:event.positive_remark|add:event.neutral_remark }}+'条',
        textStyle:{
            fontSize:20,
            color:"black"
        },
        subtextStyle: {
            fontSize: 20,
            color: 'black'
        },
        textAlign:"center",
        x: '34.5%',
        y: '44%',
    }],
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            saveAsImage : {show: true}
        }
    },
    tooltip: {
        trigger: 'item',
        formatter:function (parms){
          var str=  parms.seriesName+"</br>"+
            parms.marker+""+parms.data.legendname+"</br>"+
            "数量："+ parms.data.value+"</br>"+
            "占比："+ parms.percent+"%";
            return  str ;
        }
    },
    legend: {
        type:"scroll",
        orient: 'vertical',
        left:'70%',
        align:'left',
        top:'middle',
        textStyle: {
            color:'#8C8C8C'
        },
        height:250
    },
    series: [
        {
            name:'传播调性',
            type:'pie',
            center: ['35%', '50%'],
            radius: ['40%', '65%'],
             clockwise: false, //饼图的扇区是否是顺时针排布
            avoidLabelOverlap: false,
            label: {
                normal: {
                    show: true,
                    position: 'outter',
                     formatter:function (parms){
                         return parms.data.legendname
                     }
                }
            },
            labelLine: {
                normal: {
                  length:5,
                  length2:3,
                  smooth:true,
                }
            },
            data:m2R2Data
        }
    ]
};
        Spread_emotion.setOption(option);
    </script>
  					</div>
			</div>	
						
             <div class="col-md-12">

                    <div class="card">
                    	<div class="icon-preview col s6 m3"><i class="material-icons dp48">equalizer</i><span>传播方式分析</span></div>
                    	<div id="spread_method" style="width: 600px;height:500px;"></div>
						  <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
         var Spread_method= echarts.init(document.getElementById('spread_method'));
        // 指定图表的配置项和数据
         //数据

 var colorArray = [
    {
        top: '#1ace4a', //绿
        bottom: '#fff'
    },
    {
        top: '#4bf3ff', //蓝
        bottom: '#fff'
    }, {
        top: '#4f9aff', //深蓝
        bottom: '#fff'
    },
];
option = {
    backgroundColor: '#fff',
     tooltip: {
          show: true,
          formatter: "{b}:{c}"
        },
        toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            saveAsImage : {show: true}
        }
    },
   grid: {
          left: '5%',
          top: '12%',
          right: '1%',
          bottom: '8%',
          containLabel: true
        },
  
    xAxis: {
        type: 'value',
        show:true,
        position: 'bottom',
        axisTick: {
            show: false
        },
        axisLine: {
            show: true,
            lineStyle: {
                color: '#8C8C8C',
            }
        },
        splitLine: {
            show: false
        },
    },
    yAxis: [{
            type: 'category',
            axisTick: {
                show: false,
                alignWithLabel: false,
                length: 5,

            },
            "splitLine": { //网格线
                "show": true
            },
            inverse: 'true', //排序
            axisLine: {
                show: false,
                lineStyle: {
                    color: '#8C8C8C',
                }
            },
            data: [ '点赞', '评论', '转发']
        }

    ],
    series: [{
            name: '能耗值',
            type: 'bar',
                label: {
                normal: {
                  show: true,
                  position: 'right',
                  formatter: '{c}',
                  textStyle: {
                    color: '#8C8C8C' //color of value
                  }
                }
              },
            itemStyle: {
                normal: {
                    show: true,
                    color: function(params) {
                        let num = colorArray.length;
                        return {
                            type: 'linear',
                            colorStops: [{
                                offset: 0,
                                color: colorArray[params.dataIndex % num].bottom
                            }, {
                                offset: 1,
                                color: colorArray[params.dataIndex % num].top
                            }, {
                                offset: 0,
                                color: colorArray[params.dataIndex % num].bottom
                            }, {
                                offset: 1,
                                color: colorArray[params.dataIndex % num].top
                            }, {
                                offset: 0,
                                color: colorArray[params.dataIndex % num].bottom
                            }, {
                                offset: 1,
                                color: colorArray[params.dataIndex % num].top
                            }, {
                                offset: 0,
                                color: colorArray[params.dataIndex % num].bottom
                            }, {
                                offset: 1,
                                color: colorArray[params.dataIndex % num].top
                            }, {
                                offset: 0,
                                color: colorArray[params.dataIndex % num].bottom
                            }, {
                                offset: 1,
                                color: colorArray[params.dataIndex % num].top
                            }, {
                                offset: 0,
                                color: colorArray[params.dataIndex % num].bottom
                            }, {
                                offset: 1,
                                color: colorArray[params.dataIndex % num].top
                            }],
                            //globalCoord: false
                        }
                    },
                    barBorderRadius: 70,
                    borderWidth: 0,
                    borderColor: '#333',
                }
            },
            barGap: '0%',
            barCategoryGap: '65%',
            data: [{{ event.follow }}, {{ event.comment }}, {{ event.transmit }}]
        }

    ]
};
        Spread_method.setOption(option);
    </script>
                   
                    </div>
              
            




























            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->
<!--   <script src="assets/js/jquery-1.10.2.js"></script> -->
	<script src="{% static 'login/assets/js/jquery-1.10.2.js' %}"></script>
	<!-- Bootstrap Js -->
<!--    <script src="assets/js/bootstrap.min.js"></script> -->
	<script src="{% static 'login/assets/js/bootstrap.min.js' %}"></script>
<!--	<script src="assets/materialize/js/materialize.min.js"></script> -->
	<script src="{% static 'login/assets/materialize/js/materialize.min.js' %}"></script>
    <!-- Metis Menu Js -->
 <!--   <script src="assets/js/jquery.metisMenu.js"></script> -->
         <script src="{% static 'login/assets/js/jquery.metisMenu.js' %}"></script>
    <!-- Morris Chart Js -->
  <!--  <script src="assets/js/morris/raphael-2.1.0.min.js"></script> -->
        <script src="{% static 'login/assets/js/morris/raphael-2.1.0.min.js' %}"></script>
<!--    <script src="assets/js/morris/morris.js"></script> -->
	<script src="{% static 'login/assets/js/morris/morris.js' %}"></script>

<!--	<script src="assets/js/easypiechart.js"></script> -->
        <script src="{% static 'login/assets/js/easypiechart.js' %}"></script>
<!--	<script src="assets/js/easypiechart-data.js"></script> -->
	 <script src="{% static 'login/assets/js/easypiechart-data.js' %}"></script>
<!--	 <script src="assets/js/Lightweight-Chart/jquery.chart.js"></script> -->
	 <script src="{% static 'login/assets/js/Lightweight-Chart/jquery.chart.js' %}"></script>
    <!-- Custom Js -->
  <!--  <script src="assets/js/custom-scripts.js"></script> -->
        <script src="{% static 'login/assets/js/custom-scripts.js' %}"></script>

</body>

</html>